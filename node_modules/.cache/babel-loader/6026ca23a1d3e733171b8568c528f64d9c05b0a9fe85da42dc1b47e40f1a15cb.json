{"ast":null,"code":"import React,{useState,useEffect}from'react';import WatchList from'./WatchList';import AddCurrency from'./AddCurrency';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CurrencyCollection(){const[currency,setCurrency]=useState([]);const[yourWatchlist,setYourWatchlist]=useState([]);useEffect(()=>{// calls the fetchBots function\nfetchData();},[]);function fetchData(){const fetchurl='http://localhost:3000/total_market_cap';fetch(fetchurl).then(response=>response.json()).then(data=>setCurrency(data)).catch(error=>console.error(error));// Add error handling\nconsole.log(currency);}// Add to Watch List\nconst addToYourList=coin=>{if(!yourWatchlist.find(c=>c.id===coin.id)){setYourWatchlist([...yourWatchlist,coin]);}console.log(coin);};// Release from Watchlist\nconst releaseFromList=coin=>{setYourWatchlist(yourWatchlist.filter(c=>c.id!==coin.id));};// Delete Coin from Server\nconst dischargeCoin=coin=>{fetch(\"http://localhost:3000/total_market_cap/\".concat(coin.id),{method:'DELETE'}).then(()=>{const updatedCoin=yourWatchlist.filter(c=>c.id!==coin.id);setYourWatchlist(updatedCoin);}).catch(error=>console.error(error));};const addCurrency=newCurrency=>{setCurrency([...currency,newCurrency]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container row mx-auto\",children:[/*#__PURE__*/_jsx(WatchList,{list:yourWatchlist,releaseFromYourWatchlist:releaseFromList,dischargeCoin:dischargeCoin}),/*#__PURE__*/_jsx(AddCurrency,{onAddCurrency:addCurrency}),currency.map(coin=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"cards my-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col coininfo p-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:coin.name}),/*#__PURE__*/_jsx(\"p\",{children:\"Market Cap\"}),/*#__PURE__*/_jsx(\"p\",{children:coin.marketCap}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToYourList(coin),children:\"Watchlist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>dischargeCoin(coin),className:\"my-2\",children:\"Delete\"})]})})})},coin.id))]});}","map":{"version":3,"names":["React","useState","useEffect","WatchList","AddCurrency","jsx","_jsx","jsxs","_jsxs","CurrencyCollection","currency","setCurrency","yourWatchlist","setYourWatchlist","fetchData","fetchurl","fetch","then","response","json","data","catch","error","console","log","addToYourList","coin","find","c","id","releaseFromList","filter","dischargeCoin","concat","method","updatedCoin","addCurrency","newCurrency","className","children","list","releaseFromYourWatchlist","onAddCurrency","map","name","marketCap","onClick"],"sources":["/home/korir/Development/code/phase-2/project-2/src/components/CurrencyCollection.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport WatchList from './WatchList';\nimport AddCurrency from './AddCurrency';\n\nexport default function CurrencyCollection() {\n\n    const [currency, setCurrency] = useState([]);\n    const [yourWatchlist, setYourWatchlist] = useState([]);\n  \n    useEffect(() => {\n        // calls the fetchBots function\n        fetchData();\n    }, []);\n\n    function fetchData() {\n        const fetchurl = 'http://localhost:3000/total_market_cap';\n    \n        fetch(fetchurl)\n          .then((response) => response.json())\n          .then(data => setCurrency(data))\n          .catch(error => console.error(error)); // Add error handling\n    \n        console.log(currency);\n    }\n\n    // Add to Watch List\n    const addToYourList = (coin) => {\n        if (!yourWatchlist.find(c => c.id === coin.id)) {\n            setYourWatchlist([...yourWatchlist, coin]);\n        }\n        console.log(coin)\n    };\n\n    // Release from Watchlist\n    const releaseFromList = (coin) => {\n        setYourWatchlist(yourWatchlist.filter(c => c.id !== coin.id));\n    };\n\n    // Delete Coin from Server\n    const dischargeCoin = (coin) => {\n        fetch(`http://localhost:3000/total_market_cap/${coin.id}`, {\n        method: 'DELETE'\n        })\n        .then(() => {\n        const updatedCoin = yourWatchlist.filter(c => c.id !== coin.id);\n        setYourWatchlist(updatedCoin);\n        })\n        .catch(error => console.error(error));\n    };\n\n    const addCurrency = (newCurrency) => {\n      setCurrency([...currency, newCurrency]);\n    };\n\n\n  return (\n    <div className=\"container row mx-auto\">\n      <WatchList list={yourWatchlist} releaseFromYourWatchlist={releaseFromList} dischargeCoin={dischargeCoin} />\n      <AddCurrency onAddCurrency={addCurrency} />\n      {currency.map(coin => (\n        <div className='col-md-3' key={coin.id}>\n          <div className='cards my-4'>\n            <div className='col coininfo p-4' >\n              <div>\n                <h5>{coin.name}</h5>\n                <p>Market Cap</p>\n                <p>{coin.marketCap}</p>\n                <button onClick={() => addToYourList(coin)}>Watchlist</button>\n                <button onClick={() => dischargeCoin(coin)} className=\"my-2\">Delete</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}